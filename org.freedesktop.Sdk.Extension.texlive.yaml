id: org.freedesktop.Sdk.Extension.texlive
branch: '19.08'
runtime: org.freedesktop.Sdk
build-extension: true
sdk: org.freedesktop.Sdk
runtime-version: '19.08'
appstream-compose: false
separate-locales: false
build-options:
  prefix: /usr/lib/sdk/texlive
  env:
    PATH: /usr/lib/sdk/texlive/bin:/usr/bin
modules:
- name: libXmu
  sources:
  - type: archive
    url: https://www.x.org/releases/individual/lib/libXmu-1.1.3.tar.gz
    sha256: 5bd9d4ed1ceaac9ea023d86bf1c1632cd3b172dce4a193a72a94e1d9df87a62e
- name: libXaw
  sources:
  - type: archive
    url: https://www.x.org/releases/individual/lib/libXaw-1.0.13.tar.gz
    sha256: 7e74ac3e5f67def549722ff0333d6e6276b8becd9d89615cda011e71238ab694
- name: texlive
  buildsystem: autotools
  builddir: true
  post-install:
  - tar -xf texlive-20190410-texmf.tar.xz -C $prefix/share --strip-components=1
  - mktexlsr
  - fmtutil-sys --all
  - mtxrun --generate  
  sources:
    - type: archive
      url: https://ftp.tu-chemnitz.de/pub/tug/historic/systems/texlive/2019/texlive-20190410-source.tar.xz
      sha256: d2a29fef04e34dc3d2d2296c18995fc357aa7625e7a6bbf40fb92d83d3d0d7b5
    - type: extra-data
      filename: texlive-20190410-texmf.tar.xz
      url: https://ftp.tu-chemnitz.de/pub/tug/historic/systems/texlive/2019/texlive-20190410-texmf.tar.xz
      sha256: c2ec974abc98b91995969e7871a0b56dbc80dd8508113ffcff6923e912c4c402
      size: 2845806940
- name: scripts
  buildsystem: simple
  build-commands:
  - cp *.sh /usr/lib/sdk/texlive/
  sources:
  - type: script
    commands:
    - install -d /app/texlive
    - cp -ra /usr/lib/sdk/texlive/* /app/texlive
    dest-filename: install.sh
  - type: script
    commands:
    - export PATH=/usr/lib/sdk/texlive/bin/x86_64-linux:/usr/lib/sdk/texlive/bin:$PATH
    dest-filename: enable.sh
